<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>주문 승인</title>

<link rel="stylesheet" href="../resources/css/order/order_styles.css?v=6">
<link rel="stylesheet" href="../resources/css/order/vars.css">

</head>
<body>
<form id="order_ap_frm">
<input type="hidden" name="order_idx" id="ap_order_idx" value="">
<input type="hidden" name="order_cd" id="ap_order_cd" value="">
<input type="hidden" name="process_st" id="ap_process_st" value="">
<input type="hidden" name="approval_log" id="ap_approval_log" value="">
</form>
<div th:each="order_aplist : ${order_aplist}">
<button class="openPopupBtn" th:data-index_2="${order_aplist.order_idx}">+</button>

<!-- Popup Container -->
<div id="popupContainer" class="popup-container">
    <div class="popup">
        <button id="closePopupBtn" class="close-btn">&times;</button>
        <div class="popup-content">
            <p class="popup-title">주문 승인</p>
            <hr class="popup-divider">
            <!-- 주문 상태, 코드 -->
		    <div class="order-container">
		        <span style="font-size: 13px;">주문 상태 : <a th:text="${order_aplist.process_st}"></a></span>
		        <span style="font-size: 13px;">주문 코드 : <a th:text="${order_aplist.order_cd}"></a></span>
		        <input type="hidden" class="apc_order_cd" th:value="${order_aplist.order_cd}" th:data-index_2="${order_aplist.order_idx}">
		    </div>
            <!-- Box for content -->
            <div class="popup-box">
                <!-- 주문자 정보 Section -->
                <h2 class="box-title">주문자 정보(최초 주문자)</h2>
                <div class="box-content">
                    <div class="input-row">
                        <div class="input-group">
                            <label for="modifyName">이름:</label>
                    		<a th:text="${order_aplist.user_nm}"></a>
                        </div>
                        <div class="input-group">
                            <label for="modifyId">아이디:</label>
                            <a th:text="${order_aplist.order_id}"></a>
                        </div>
                    </div>
                    <div class="input-row">
                        <div class="input-group">
                            <label for="modifyAffiliation">소속:</label>
                            <!-- 수정 필요함 -->
                            <a th:text="${order_aplist.user_company}"></a>
                        </div>
                        <div class="input-group">
                            <label for="modifyPhone">전화번호:</label>
                            <a th:text="${order_aplist.user_tel}"></a>
                        </div>
                    </div>
                </div>

                <!-- 상품 Section -->
                <h2 class="box-title">내용</h2>
                <div class="box-content">
                    <div class="input-row">
                        <div class="input-group">
                            <label for="productCode">상품코드:</label>
                            <a th:text="${order_aplist.product_cd}"></a>
                        </div>
                    </div>
                    <div class="input-row">
                    <div class="input-group">
                        <label for="productName">상품명:</label>
                        <a th:text="${order_aplist.product_nm}"></a>
                    </div>
                    </div>
                    <div class="input-row">
                        <div class="input-group">
                            <label for="productManufacturer">제조사:</label>
                            <a th:text="${order_aplist.supplier_nm}"></a>
                        </div>
                        <div class="input-group">
                            <label for="productSize">크기:</label>
                            <a th:text="${order_aplist.product_sz}"></a>
                        </div>
                    </div>
                    <div class="input-row">
                        <div class="input-group">
                            <label for="productWeight">무게:</label>
                            <a th:text="${order_aplist.product_wt}"></a>
                        </div>
                        <div class="input-group">
                            <label for="productPrice">입고 가격:</label>
                            <a th:text="${order_aplist.purchase_pr}"></a>
                        </div>
                    </div>
                    <div class="input-row">
                        <div class="input-group">
                            <label for="productQuantity">상품 수량:</label>
                            <a th:text="${order_aplist.order_qty}"></a>
                        </div>
                        <div class="input-group">
                            <label for="totalPrice">총 가격:</label>
                            <a th:text="${order_aplist.order_price}"></a>
                        </div>
                    </div>
                    <div class="input-row">
                        <div class="input-group">
                            <label for="startDate">착수일:</label>
                            <a th:text="${order_aplist.start_dt}"></a>
                        </div>
                        <div class="input-group">
                            <label for="endDate">납기일:</label>
                            <a th:text="${order_aplist.due_dt}"></a>
                        </div>
                    </div>
                    <div class="input-row">
	                    <div class="input-group">
	                        <label for="orderDate">주문 날짜:</label>
	                        <a th:text="${order_aplist.order_dt}"></a>
	                    </div>
                    </div>
                    <!-- 수정 내역 존재시에만 -->
                    <div th:if="${order_aplist.order_dt != order_aplist.update_dt}">
                    <div class="input-row">
	                    <div class="input-group">
	                        <label for="modifyDate">주문 수정자 : </label>
	                        <a th:text="${order_aplist.update_by}"></a>
	                    </div>
	                    <div class="input-group">    
	                        <label for="modifyName">소속:</label>
	                        <a th:text="${order_aplist.user_company}"></a>
	                    </div>
                    </div>
                    </div>
                    <!-- 대기 상태 -->
                    <div th:if="${order_aplist.process_st == '대기'}">
                    <div class="input-row">                
                    	<div class="input-group-text">
                    		<label for="approval_log">비고란: </label>
                    		<textarea class="approval_log" th:data-index_2="${order_aplist.order_idx}"></textarea>
                    	</div>
                    </div>
					</div>
					<div th:if="${order_aplist.process_st != '대기'}">
                    <div class="input-row">
                    	<div class="input-group-text">
                    		<label for="approval_log">비고란: </label>
                    		<div th:if="${order_aplist.approval_log != ''}">
                    		<a th:text="${order_aplist.approval_log}"></a>
                    		</div>
                    		<div th:if="${order_aplist.approval_log == '' || order_aplist.approval_log == null}">
                    		없음
                    		</div>
                    	</div>
                    </div>
                    </div>
					<div th:if="${order_aplist.process_st == '완료'}">
                    <div class="input-row">
                    	<div class="input-group-text">
                    		<label for="approval_dt">완료일자: </label>
                    		<a th:text="${order_aplist.approval_dt}"></a>
                    	</div>
                    </div>	
                    </div>
                </div>
            </div>
        </div>
        <!-- 대기 상태 -->
        <div th:if="${order_aplist.process_st == '대기'}">
        <div class="button-group">
        	<div class="button-1" th:data-index_2="${order_aplist.order_idx}">
       			<div class="divbutton">승인</div>
       		</div>
       		<div class="button-2" th:data-index_2="${order_aplist.order_idx}">
       			<div class="divbutton">거절</div>
       		</div>
	    	<div class="button-3">
       			<div class="divbutton">취소</div>
       		</div>
        </div>
       	</div>
       	<!-- 승인 상태 -->
       	<div th:if="${order_aplist.process_st == '승인'}">
        <div class="button-group">
        	<div class="button-4" th:data-index_2="${order_aplist.order_idx}">
       			<div class="divbutton">완료</div>
       		</div>
	    	<div class="button-3">
       			<div class="divbutton">취소</div>
       		</div>
        </div>
       	</div>
       	<!-- 거절/완료 상태 -->
       	<div th:if="${order_aplist.process_st == '거절' || order_aplist.process_st == '완료'}">
        <div class="button-group">
	    	<div class="button-3">
       			<div class="divbutton">취소</div>
       		</div>
        </div>
       	</div>
    </div>
</div>

</div>	<!-- 타임리프 반복문 끝 -->

<script src="../resources/js/order/order_ap_script.js?v=3"></script>

</body>
</html>